<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Console – Vallit{% endblock %}</title>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='images/logo.svg') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/console.css') }}?v=1">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>

<body>
    <div class="console-shell">
        <!-- LEFT RAIL -->
        <nav class="console-rail">
            <a href="{{ url_for('dashboard_overview') }}"
                class="rail-item {% if request.endpoint == 'dashboard_overview' %}active{% endif %}"
                title="Home [Cmd+H]">
                <i data-lucide="layout-grid" width="20" height="20"></i>
            </a>

            <div class="rail-sep"></div>

            <a href="{{ url_for('admin_widgets') }}"
                class="rail-item {% if 'widget' in request.endpoint %}active{% endif %}" title="Agents [Cmd+A]">
                <i data-lucide="bot" width="20" height="20"></i>
            </a>

            <a href="{{ url_for('dashboard_api_keys') }}"
                class="rail-item {% if 'api_key' in request.endpoint %}active{% endif %}" title="API Keys [Cmd+K]">
                <i data-lucide="key" width="20" height="20"></i>
            </a>

            <a href="{{ url_for('dashboard_integrations') }}"
                class="rail-item {% if 'integration' in request.endpoint %}active{% endif %}"
                title="Integrations [Cmd+I]">
                <i data-lucide="plug" width="20" height="20"></i>
            </a>

            <!-- Bottom Section -->
            <div class="rail-section bottom">
                <a href="{{ url_for('dashboard_settings') }}"
                    class="rail-item {% if 'settings' in request.endpoint %}active{% endif %}" title="Settings">
                    <i data-lucide="settings-2" width="20" height="20"></i>
                </a>
                <a href="{{ url_for('logout') }}" class="rail-item" title="Logout">
                    <i data-lucide="log-out" width="20" height="20"></i>
                </a>
                <div style="height: 10px;"></div>
            </div>
        </nav>

        <!-- MAIN CONTENT -->
        <div class="console-main">
            <!-- HEADER -->
            <header class="console-header">
                <div class="header-left">
                    {% block header_left %}
                    <h1 style="margin:0; font-size:14px; font-weight:600;">{% block page_title %}Overview{% endblock %}
                    </h1>
                    {% endblock %}
                </div>

                <div class="cmd-bar" title="Command Palette (Coming Soon)">
                    <i data-lucide="search" width="14" height="14"></i>
                    <span style="font-size:12px;">Go to...</span>
                    <span class="cmd-kbd">⌘K</span>
                </div>
            </header>

            <!-- CONTENT -->
            <div class="console-content">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Simple Keyboard Shortcuts (Placeholder)
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                // TODO: Open Command Palette
                console.log('Open Command Palette');
            }
        });
    </script>
</body>

</html>