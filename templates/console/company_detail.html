{% extends "layout_console.html" %}

{% block page_title %}{{ company.name }}{% endblock %}

{% block content %}
<div style="max-width: 1000px;">

    <!-- BREADCRUMBS & HEADER -->
    <div style="margin-bottom: var(--space-xl);">
        <div
            style="font-size: 12px; color: var(--console-text-tertiary); margin-bottom: var(--space-sm); display: flex; align-items: center; gap: 8px;">
            <a href="{{ url_for('admin_companies') }}"
                style="color: inherit; text-decoration: none; hover: underline;">Companies</a>
            <i data-lucide="chevron-right" width="12" height="12"></i>
            <span>Detail</span>
        </div>

        <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 16px;">
                <div
                    style="width: 48px; height: 48px; background: var(--console-bg-secondary); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700;">
                    {{ company.name[:1] }}
                </div>
                <div>
                    <h1 style="font-size: 24px; font-weight: 600; margin: 0 0 4px 0;">{{ company.name }}</h1>
                    <div class="subtitle">
                        ID: <span style="font-family: monospace;">{{ company.id }}</span>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: var(--space-sm);">
                <button class="btn btn-secondary">
                    <i data-lucide="edit-2" width="14" height="14"></i>
                    Edit Details
                </button>
            </div>
        </div>
    </div>

    <div class="grid" style="grid-template-columns: 2fr 1fr; gap: var(--space-xl);">

        <!-- MAIN CONTENT (Members) -->
        <div>
            <div
                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--space-md);">
                <h2 style="font-size: 14px; font-weight: 500;">Team Members</h2>
                <span class="badge">{{ members|length }} Users</span>
            </div>

            <div class="panel" style="padding: 0; overflow: hidden;">
                <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                    <thead
                        style="border-bottom: 1px solid var(--console-border); background: var(--console-bg-secondary);">
                        <tr>
                            <th
                                style="text-align: left; padding: 12px; font-weight: 500; color: var(--console-text-secondary); padding-left: 20px;">
                                User</th>
                            <th
                                style="text-align: left; padding: 12px; font-weight: 500; color: var(--console-text-secondary);">
                                Role</th>
                            <th
                                style="text-align: left; padding: 12px; font-weight: 500; color: var(--console-text-secondary);">
                                Email</th>
                            <th style="border-left: 1px solid var(--console-border); width: 40px;"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for member in members %}
                        <tr style="border-bottom: 1px solid var(--console-border);">
                            <td style="padding: 12px 12px 12px 20px;">
                                <div style="font-weight: 500;">{{ member.name }}</div>
                            </td>
                            <td style="padding: 12px;">
                                {% if member.role == 'ceo' %}
                                <span class="badge"
                                    style="background: rgba(34, 197, 94, 0.1); color: #22c55e; border: none;">Owner</span>
                                {% elif member.role == 'admin' %}
                                <span class="badge" style="background: var(--console-bg-secondary);">Admin</span>
                                {% else %}
                                <span class="badge"
                                    style="background: transparent; border: 1px solid var(--console-border);">Member</span>
                                {% endif %}
                            </td>
                            <td style="padding: 12px; color: var(--console-text-secondary);">
                                {{ member.email }}
                            </td>
                            <td
                                style="padding: 12px; text-align: center; border-left: 1px solid var(--console-border);">
                                <a href="{{ url_for('admin_user_edit', user_id=member.id) }}"
                                    style="color: var(--console-text-tertiary); transition: color 0.2s;">
                                    <i data-lucide="settings" width="14" height="14"></i>
                                </a>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td colspan="4"
                                style="padding: 24px; text-align: center; color: var(--console-text-tertiary);">
                                No members in this organization yet.
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div style="margin-top: var(--space-lg);">
                <button class="btn btn-secondary" style="width: 100%; border-style: dashed;">
                    <i data-lucide="plus" width="14" height="14"></i>
                    Add Member to {{ company.name }}
                </button>
            </div>
        </div>

        <!-- SIDEBAR (Info) -->
        <div>
            <div class="panel">
                <h3
                    style="font-size: 13px; font-weight: 600; margin: 0 0 var(--space-md) 0; color: var(--console-text-secondary);">
                    Organization Info</h3>

                <div style="display: flex; flex-direction: column; gap: 16px; font-size: 13px;">
                    <div>
                        <div style="color: var(--console-text-tertiary); margin-bottom: 4px;">Industry</div>
                        <div style="color: var(--console-text-primary);">{{ company.industry or 'Not Specified' }}</div>
                    </div>

                    <div>
                        <div style="color: var(--console-text-tertiary); margin-bottom: 4px;">Website</div>
                        {% if company.website %}
                        <a href="{{ company.website }}" target="_blank"
                            style="color: var(--console-text-primary); text-decoration: underline;">{{ company.website
                            }}</a>
                        {% else %}
                        <div style="color: var(--console-text-secondary); font-style: italic;">None</div>
                        {% endif %}
                    </div>

                    <div>
                        <div style="color: var(--console-text-tertiary); margin-bottom: 4px;">Created</div>
                        <div style="font-family: monospace; color: var(--console-text-secondary);">{{
                            company.created_at|datetime if company.created_at else '-' }}</div>
                    </div>
                </div>

                <hr style="border: 0; border-top: 1px solid var(--console-border); margin: var(--space-lg) 0;">

                <h3
                    style="font-size: 13px; font-weight: 600; margin: 0 0 var(--space-md) 0; color: var(--console-text-secondary);">
                    Widget Config</h3>

                <a href="{{ url_for('admin_widgets', highlight_company=company.id) }}" class="btn btn-secondary"
                    style="width: 100%; justify-content: space-between;">
                    <span>Manage Widgets</span>
                    <i data-lucide="arrow-right" width="14" height="14"></i>
                </a>
            </div>
        </div>

    </div>

</div>
{% endblock %}