{% extends "layout_console.html" %}

{% block page_title %}Edit User{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">

    <a href="javascript:history.back()"
        style="display: inline-flex; align-items: center; gap: 6px; color: var(--console-text-tertiary); text-decoration: none; font-size: 13px; margin-bottom: var(--space-lg); hover: text-decoration: underline;">
        <i data-lucide="arrow-left" width="14" height="14"></i>
        Back
    </a>

    <div class="panel">
        <div
            style="margin-bottom: var(--space-xl); border-bottom: 1px solid var(--console-border); padding-bottom: var(--space-lg);">
            <h1 style="font-size: 18px; font-weight: 600; margin: 0 0 4px 0;">User Profile</h1>
            <div class="subtitle">ID: {{ target_user.id }}</div>
        </div>

        <form method="POST">

            <!-- NAME -->
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px;">Full Name</label>
                <input type="text" name="name" value="{{ target_user.name }}" class="console-input" required>
            </div>

            <!-- EMAIL -->
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px;">Email
                    Address</label>
                <input type="email" name="email" value="{{ target_user.email }}" class="console-input" required>
            </div>

            <!-- ROLE -->
            <div style="margin-bottom: var(--space-lg);">
                <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px;">System
                    Role</label>
                <select name="role" class="console-input">
                    <option value="user" {% if target_user.role=='user' %}selected{% endif %}>User (Worker)</option>
                    <option value="ceo" {% if target_user.role=='ceo' %}selected{% endif %}>CEO (Owner)</option>
                    <option value="admin" {% if target_user.role=='admin' %}selected{% endif %}>System Admin</option>
                </select>
                <div style="font-size: 11px; color: var(--console-text-tertiary); margin-top: 6px;">
                    Warning: 'System Admin' grants full access to the Syntra console.
                </div>
            </div>

            <!-- COMPANY -->
            <div style="margin-bottom: var(--space-xl);">
                <label
                    style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px;">Organization</label>
                <select name="company_id" class="console-input">
                    <option value="">-- No Organization --</option>
                    {% for c in companies %}
                    <option value="{{ c.id }}" {% if target_user.company_id==c.id %}selected{% endif %}>
                        {{ c.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- ACTIONS -->
            <div
                style="display: flex; justify-content: flex-end; gap: var(--space-md); border-top: 1px solid var(--console-border); padding-top: var(--space-lg);">
                <button type="submit" class="btn btn-primary">
                    <i data-lucide="save" width="14" height="14"></i>
                    Save Changes
                </button>
            </div>

        </form>
    </div>

    <!-- DANGER ZONE -->
    <div style="margin-top: var(--space-xl);">
        <h3 style="font-size: 13px; font-weight: 600; color: var(--console-error); margin-bottom: var(--space-md);">
            Danger Zone</h3>
        <div class="panel" style="border-color: rgba(239, 68, 68, 0.3); background: rgba(239, 68, 68, 0.02);">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div style="font-size: 13px; color: var(--console-text-secondary);">
                    Delete this user permanently. This action cannot be undone.
                </div>
                <button class="btn btn-secondary"
                    style="color: var(--console-error); border-color: rgba(239, 68, 68, 0.3);">
                    Delete User
                </button>
            </div>
        </div>
    </div>

</div>
{% endblock %}